<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>U.S. Coin Identifier Game</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.8.49/Tone.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Baloo+2:wght@700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .baloo {
            font-family: 'Baloo 2', cursive;
        }
        .coin-image {
            transition: transform 0.3s ease-in-out;
            max-height: 160px; /* 10rem */
        }
        .coin-image:hover {
            transform: scale(1.05) rotate(5deg);
        }
        .btn-choice {
            transition: all 0.2s ease;
        }
        .btn-choice:hover {
            transform: translateY(-3px);
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }
        .btn-choice:active {
            transform: translateY(-1px);
        }
    </style>
</head>
<body class="bg-blue-50 text-gray-800 flex items-center justify-center min-h-screen p-4">

    <!-- Main Game Container -->
    <div id="game-container" class="w-full max-w-md mx-auto bg-white rounded-2xl shadow-2xl p-6 md:p-8 text-center">

        <!-- Header -->
        <header class="mb-6">
            <h1 class="baloo text-4xl font-bold text-blue-600">Coin Identifier</h1>
            <p id="question-text" class="text-gray-500 mt-1">Can you name this U.S. coin?</p>
            <div class="mt-4 bg-gray-100 rounded-lg p-2 inline-flex items-center space-x-2">
                <span class="font-semibold text-lg">Score:</span>
                <span id="score" class="text-2xl font-bold text-green-500">0</span>
            </div>
        </header>
        
        <!-- Coin Display -->
        <div id="coin-display" class="mb-6 h-48 flex items-center justify-center cursor-pointer">
            <!-- Image will be inserted here by JavaScript -->
        </div>
        
        <!-- Choices -->
        <div id="choices-container" class="grid grid-cols-2 gap-4 mb-4">
            <!-- Buttons will be inserted here by JavaScript -->
        </div>

        <!-- Feedback Message -->
        <div id="feedback" class="h-16 flex flex-col items-center justify-center p-2 rounded-lg transition-all duration-300">
             <p id="feedback-text" class="text-xl font-semibold"></p>
             <p id="coin-info" class="text-gray-600"></p>
        </div>

        <!-- Next Button -->
        <button id="next-btn" class="w-full bg-blue-500 text-white font-bold py-3 px-4 rounded-xl hover:bg-blue-600 focus:outline-none focus:ring-4 focus:ring-blue-300 transition-all duration-300 text-lg shadow-lg hidden">
            Next Coin
        </button>

    </div>

    <script>
        // --- DATA ---
        const coins = [
            { 
                name: 'Penny', 
                value: 0.01, 
                displayValue: '1Â¢',
                imageUrl: 'penny.png',
                info: 'This is a Penny, worth 1 cent!'
            },
            { 
                name: 'Nickel', 
                value: 0.05, 
                displayValue: '5Â¢',
                imageUrl: 'nickel.jpg',
                info: 'This is a Nickel, worth 5 cents!'
            },
            { 
                name: 'Dime', 
                value: 0.10, 
                displayValue: '10Â¢',
                imageUrl: 'dime.png',
                info: 'This is a Dime, worth 10 cents!'
            },
            { 
                name: 'Quarter', 
                value: 0.25, 
                displayValue: '25Â¢',
                imageUrl: 'quarter.png',
                info: 'This is a Quarter, worth 25 cents!'
            }
        ];

        // --- STATE ---
        let currentCoin = null;
        let score = 0;
        let lastCoinIndex = -1;
        let audioStarted = false;
        let questionType = 'name'; // 'name' or 'value'

        // --- SOUNDS ---
        const correctSound = new Tone.FMSynth({
            harmonicity: 5.1,
            modulationIndex: 32,
            envelope: {
                attack: 0.001,
                decay: 0.2,
                sustain: 0.01,
                release: 0.1
            },
            modulationEnvelope: {
                attack: 0.01,
                decay: 0.5,
                sustain: 0,
                release: 0.1
            }
        }).toDestination();
        
        const incorrectSound = new Tone.Synth({
            oscillator: { type: 'square' },
            envelope: { attack: 0.01, decay: 0.3, sustain: 0.1, release: 0.3 }
        }).toDestination();

        // --- DOM ELEMENTS ---
        const coinDisplay = document.getElementById('coin-display');
        const scoreEl = document.getElementById('score');
        const choicesContainer = document.getElementById('choices-container');
        const feedbackEl = document.getElementById('feedback');
        const feedbackTextEl = document.getElementById('feedback-text');
        const coinInfoEl = document.getElementById('coin-info');
        const nextBtn = document.getElementById('next-btn');
        const questionTextEl = document.getElementById('question-text');

        // --- FUNCTIONS ---

        /**
         * Selects and displays a new random coin and question type.
         */
        function displayNewCoin() {
            let randomIndex;
            do {
                randomIndex = Math.floor(Math.random() * coins.length);
            } while (randomIndex === lastCoinIndex);
            
            lastCoinIndex = randomIndex;
            currentCoin = coins[randomIndex];

            // Randomly choose the question type
            questionType = Math.random() < 0.5 ? 'name' : 'value';

            // Update question text
            if (questionType === 'name') {
                questionTextEl.textContent = 'Can you name this U.S. coin?';
            } else {
                questionTextEl.textContent = 'What is the value of this coin?';
            }

            coinDisplay.innerHTML = `<img src="${currentCoin.imageUrl}" alt="A U.S. Coin" class="coin-image drop-shadow-lg">`;
            createChoiceButtons();
        }

        /**
         * Creates choice buttons based on the current question type.
         */
        function createChoiceButtons() {
            choicesContainer.innerHTML = ''; 
            const shuffledCoins = [...coins].sort(() => Math.random() - 0.5);
            const buttonColors = ['bg-amber-500', 'bg-slate-500', 'bg-sky-500', 'bg-indigo-500'];
            const hoverColors = ['hover:bg-amber-600', 'hover:bg-slate-600', 'hover:bg-sky-600', 'hover:bg-indigo-600'];

            shuffledCoins.forEach((coin, index) => {
                const button = document.createElement('button');
                button.className = `btn-choice w-full text-white font-semibold py-4 px-2 rounded-xl shadow-md text-lg ${buttonColors[index % buttonColors.length]} ${hoverColors[index % hoverColors.length]}`;
                
                if (questionType === 'name') {
                    button.textContent = coin.name;
                    button.dataset.name = coin.name;
                } else { // 'value'
                    button.textContent = coin.displayValue;
                    button.dataset.value = coin.value;
                }
                
                button.addEventListener('click', () => handleChoice(button));
                choicesContainer.appendChild(button);
            });
        }
        
        /**
         * Handles the user's choice based on the question type.
         */
        function handleChoice(button) {
            if (!audioStarted) {
                Tone.start();
                audioStarted = true;
            }

            const allButtons = choicesContainer.querySelectorAll('button');
            allButtons.forEach(btn => btn.disabled = true);

            let isCorrect = false;
            if (questionType === 'name') {
                isCorrect = button.dataset.name === currentCoin.name;
            } else { // 'value'
                isCorrect = parseFloat(button.dataset.value) === currentCoin.value;
            }

            if (isCorrect) {
                const now = Tone.now();
                correctSound.triggerAttackRelease("G5", "32n", now);
                correctSound.triggerAttackRelease("C6", "32n", now + 0.08);
                score++;
                scoreEl.textContent = score;
                feedbackEl.classList.add('bg-green-100');
                feedbackTextEl.textContent = 'Correct! ðŸŽ‰';
                feedbackTextEl.classList.add('text-green-600');
                coinInfoEl.textContent = currentCoin.info;
                button.classList.add('ring-4', 'ring-green-400');
            } else {
                incorrectSound.triggerAttackRelease("A2", "8n", Tone.now());
                feedbackEl.classList.add('bg-red-100');
                feedbackTextEl.textContent = 'Not quite, try again!';
                feedbackTextEl.classList.add('text-red-600');
                coinInfoEl.textContent = '';
                button.classList.add('ring-4', 'ring-red-400');

                // Highlight the correct answer
                let correctButton;
                if (questionType === 'name') {
                    correctButton = choicesContainer.querySelector(`[data-name="${currentCoin.name}"]`);
                } else {
                    correctButton = choicesContainer.querySelector(`[data-value="${currentCoin.value}"]`);
                }
                if (correctButton) {
                    correctButton.classList.add('ring-4', 'ring-green-400');
                }
            }
            
            nextBtn.classList.remove('hidden');
        }

        /**
         * Resets the game state for the next round.
         */
        function setupNextRound() {
            feedbackEl.className = 'h-16 flex flex-col items-center justify-center p-2 rounded-lg transition-all duration-300';
            feedbackTextEl.textContent = '';
            feedbackTextEl.classList.remove('text-green-600', 'text-red-600');
            coinInfoEl.textContent = '';
            nextBtn.classList.add('hidden');
            displayNewCoin();
        }

        // --- EVENT LISTENERS ---
        nextBtn.addEventListener('click', setupNextRound);

        // --- INITIALIZATION ---
        document.addEventListener('DOMContentLoaded', setupNextRound);

    </script>
</body>
</html>


